<!DOCTYPE html>
<html>

<head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"> </script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script src="https://kit.fontawesome.com/dc2bc3f275.js" crossorigin="anonymous"></script>
    <script src="./config.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <script>
        localStorage.setItem('ARjsMultiMarkerFile', hiro_0_marker);
    </script>
</head>

<link rel="stylesheet" href="./css/style-AR.css" />

<body style="margin: 0px; overflow: hidden;">
    <div id="draggableModal" class="tab-container">
        <!-- Conteúdo do Sobre aqui -->
        <div class="header" id="header">
            <div class="tabs">
                <button class="tab-button" onclick="openTab(event, 'Tempo')">Tempo</button>
                <button class="tab-button" onclick="openTab(event, 'Definicoes')">Definições</button>
            </div>
            <div id="Tempo" class="tab-content">
                <div class="play-box">
                    <div class="button-box">
                        <button disabled id="start-animation" class="start-animation">
                            <i class="fa-solid fa-play" style="color: #ffffff;"></i>
                        </button>
                    </div>
                    <div class="time-box">
                        <!-- <div class="day-shift">
                            <button id="decrement-season">
                                <i class="fa-solid fa-chevron-right fa-flip-horizontal" style="color: #9d4b6b;"></i>
                            </button>
                            <span id="current-season"
                                style="padding-left: 10px; padding-right: 10px; font-size: medium;">
                                Inverno
                            </span>
                            <button id="increment-season">
                                <i class="fa-solid fa-chevron-right" style="color: #9d4b6b;"></i>
                            </button>
                        </div> -->
                        <div class="day-shift">
                            <button id="decrement-month">
                                <i class="fa-solid fa-chevron-right fa-flip-horizontal" style="color: #9d4b6b;"></i>
                            </button>

                            <span id="current-month"
                                style="padding-left: 10px; padding-right: 10px; font-size: medium;">
                                Dezembro
                            </span>
                            <button id="increment-month">
                                <i class="fa-solid fa-chevron-right" style="color: #9d4b6b;"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="Definicoes" class="tab-content"></div>
        </div>
        <p>Estações do ano</p>
        <div id="dynamic-bar" class="dynamic-bar"><span></span></div>
    </div>

    <script src="./js/basic.js">
    </script>
    <script src="./gestures.js"></script>

    <!-- <a-scene embedded arjs="debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3_HAMMING63;"
        vr-mode-ui="enabled: false" loading-screen="enabled:false" gesture-detector> -->

    <a-scene id="scene" embedded arjs='sourceType:webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; '
        vr-mode-ui="enabled: false;" loading-screen="enabled:false" gesture-detector click-detector>
        <a-assets>
            <a-asset-item id="sun" src="./assets/models/ps1_style_low_poly_sun/scene.gltf"></a-asset-item>
            <a-asset-item id="earth" src="./assets/models/earth-3/scene.gltf"></a-asset-item>
            <a-asset-item id="arrow-sun" src="./assets/models/direction_arrow/scene.gltf"></a-asset-item>
            <img id="my-image" src="./assets/Arrow2.png">
            <!-- <a-asset-item id="mascote" src="../assets/models/joana_diss.glb"></a-asset-item> -->
        </a-assets>

        <a-marker marker-handler emitevents="true" cursor="rayOrigin: mouse; fuse: true" id="animated-marker"
            preset="area">
            <a-entity light="type: ambient; color: #CCC; intensity: 0.02"></a-entity>

            <a-entity id="sun" position="0 0 0">
                <a-gltf-model id="sun-object" src="#sun" scale="0.03 0.03 0.03" position="0 0 0" rotation="0 0 0"
                    class="clickable">
                </a-gltf-model>

                <a-light type="directional" color="#fff" castShadow: true intensity="1.5" position="0 0 0"
                    target="#directionaltarget"></a-light>
            </a-entity>


            <a-entity id="sun-direction" rotate-continuously="speed: 1">
                <a-image scale="1.6 0.1 1" position="1 0.8 0" src="#my-image"></a-image>
                <a-image scale="1.4 0.1 1" position="1 0.6 0" src="#my-image"></a-image>
                <a-image scale="1.2 0.1 1" position="1 0.4 0" src="#my-image"></a-image>
                <a-image scale="1 0.1 1" position="1 0.2 0" src="#my-image"></a-image>
                <a-image scale="0.9 0.1 1" position="1 0 0" src="#my-image"></a-image>
                <a-image scale="0.95 0.1 1" position="1 -0.2 0" src="#my-image"></a-image>
                <a-image scale="1.1 0.1 1" position="1 -0.4 0" src="#my-image"></a-image>
                <a-image scale="1.4 0.1 1" position="1 -0.6 0" src="#my-image"></a-image>
            </a-entity>

            <a-entity id="entity" position="2 0 0" rotation="0 0 -23.5" orbit-around-sun="radius: 2; duration: 360000">
                <a-gltf-model id="directionaltarget" src="#earth" scale="0.5 0.5 0.5"
                    rotate-continuously="speed: 84; active: false; body: earth" class="clickable" rotation="0 -170 0"
                    gesture-handler shadow="receive: true">
                </a-gltf-model>
                <a-cylinder id="aixs" radius="0.01" height="4" color="#00000"></a-cylinder>
            </a-entity>

            <a-ring radius-inner="2" radius-outer="2.01" material="color: white;" rotation="-90 0 0"></a-ring>

            <a-entity id="line1" class="interactive-line" line="start: 1.5 0 0; end: 2.5 0 0; color: black"
                click-listener="month: 0"></a-entity>
            <a-entity id="line2" class="interactive-line2" line="start: 0 0 -1.5; end: 0 0 -2.5; color: black"
                event-set__click="material.color: red">
            </a-entity>
            <a-entity id=" line3" class="interactive-line" line="start: -1.5 0 0; end: -2.5 0 0; color: black"
                click-listener="month: 6"></a-entity>
            <a-entity id="line4" class="interactive-line" line="start: 0 0 1.5; end: 0 0 2.5; color: black"
                click-listener="month: 9"></a-entity>



        </a-marker>
        <a-entity id="camera" camera>

        </a-entity>

    </a-scene>
    <div class="circle-back">
        <a href="./index.html">
            <img src="./assets/images/back.png" alt="back" style="width: 20px; height: 20px" />
        </a>
    </div>
    <script>


        AFRAME.registerComponent('click-detector', {
            init: function () {
                const sun = document.querySelector('#sun-object'); // Assuming the moon has an ID of 'moon'

                const line4 = document.querySelector('#line2');

                this.el.addEventListener('click', (event) => {
                    // // A-Frame provides the point of click in the scene coordinates

                    // // Get the position of the moon
                    // const sunPosition = sun.object3D.position;
                    // console.log("Sun position: ", sunPosition);

                    // // Calculate the distance between the click and the moon
                    // const distance = clickPosition.distanceTo(sunPosition);
                    // console.log("Distance to sun: ", distance);

                    // // If the distance is less than the radius of the moon, we clicked on the moon
                    // if (distance < 0.5) {
                    //     alert('Sun was clicked');

                    // }
                });
            }
        });

        // AFRAME.registerComponent('click-listener1', {
        //     init: function () {
        //         this.el.addEventListener('click', function () {
        //             alert('I was clicked at: ');
        //         });
        //     }
        // });



    </script>

</body>

</html>